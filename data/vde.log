[2026-02-21 18:27:26.768] [vde] [info] Data store configure CACHE_SIZE_MB succeeded
[2026-02-21 18:27:26.768] [vde] [info] Data store configure INI succeeded (/data/datastore.ini)
[2026-02-21 18:27:26.822] [vde] [info] Data store initialization succeeded
[2026-02-21 18:27:26.822] [vde] [info] VDE Engine initializing with work_dir: /data
[2026-02-21 18:27:26.823] [vde] [info] IndexManager and StorageManager created
[2026-02-21 18:27:47.661] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:27:47.662] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:27:47.662] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' not found in memory
[2026-02-21 18:27:47.662] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:27:47.662] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:27:47.665] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:27:47.665] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:27:47.671] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:27:47.671] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:27:47.673] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:27:47.673] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:27:47.674] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:27:47.674] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:27:47.674] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:27:47.675] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:27:47.675] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:27:47.676] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:27:47.676] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:27:47.676] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:27:47.678] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:27:47.678] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:27:47.678] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:27:47.678] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:27:47.678] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:27:47.700] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:27:47.700] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:27:47.700] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:27:47.700] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:27:47.700] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:27:47.700] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:27:47.700] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:27:47.702] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:27:47.702] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:27:47.702] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:31:34.513] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:31:34.513] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:31:34.513] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:31:34.514] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:31:34.515] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:31:34.518] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:31:34.519] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 18:31:34.522] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:31:34.523] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:31:34.523] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:31:34.523] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:31:34.523] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:31:34.523] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:31:34.523] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:31:34.523] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:31:34.523] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:31:34.524] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:31:34.524] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:31:34.524] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:31:34.524] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:31:34.524] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:31:34.524] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:31:34.525] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (0 mappings)
[2026-02-21 18:31:34.525] [vde] [info] [FaissDriver::Serialize] index_ address: 140734065809568
[2026-02-21 18:31:34.525] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:31:34.525] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=0, id_map_size=0, deleted_ids=0
[2026-02-21 18:31:34.525] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:31:34.526] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=-1
[2026-02-21 18:31:34.526] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=0, cum_nneighbor_per_level.size()=9
[2026-02-21 18:31:34.526] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=0, is_trained=true, d=7
[2026-02-21 18:31:34.526] [vde] [error] [FaissDriver::Serialize] Cannot serialize empty index (ntotal=0)
[2026-02-21 18:31:34.526] [vde] [error] [FaissDriver::Serialize] Please add vectors to the index before saving
[2026-02-21 18:31:34.526] [vde] [error] [VDECollection::SaveSnapshot] Failed to serialize index to /data/player_roles/index.snapshot
[2026-02-21 18:31:34.526] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:31:34.526] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:31:34.526] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:31:34.527] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:31:34.527] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:31:34.527] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 18:31:34.527] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:31:34.527] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 0 vectors
[2026-02-21 18:31:34.527] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:31:34.527] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:31:34.527] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:31:34.527] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:31:34.527] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:31:34.528] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:31:34.528] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:31:34.530] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:31:34.530] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:31:34.530] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:31:34.530] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:31:34.530] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:31:34.530] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:31:34.530] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:31:34.530] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:31:34.530] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:31:34.534] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:31:34.534] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:31:34.534] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:31:34.534] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:31:34.534] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:31:34.534] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:31:34.534] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:31:34.535] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:31:34.535] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:31:34.535] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:34:15.269] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:34:15.269] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:34:15.269] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:34:15.269] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.270] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:34:15.271] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:34:15.271] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 18:34:15.273] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:34:15.273] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.273] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:34:15.273] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.273] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.274] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.274] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:34:15.274] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:34:15.274] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (0 mappings)
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864490256
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=0, id_map_size=0, deleted_ids=0
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=-1
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=0, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:15.274] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=0, is_trained=true, d=7
[2026-02-21 18:34:15.274] [vde] [error] [FaissDriver::Serialize] Cannot serialize empty index (ntotal=0)
[2026-02-21 18:34:15.274] [vde] [error] [FaissDriver::Serialize] Please add vectors to the index before saving
[2026-02-21 18:34:15.274] [vde] [error] [VDECollection::SaveSnapshot] Failed to serialize index to /data/player_roles/index.snapshot
[2026-02-21 18:34:15.274] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:34:15.274] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:34:15.274] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.275] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 18:34:15.275] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 18:34:15.275] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 18:34:15.275] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:34:15.275] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 0 vectors
[2026-02-21 18:34:15.275] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:34:15.275] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:34:15.275] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:34:15.275] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:34:15.275] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:34:15.276] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:34:15.276] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:34:15.277] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:34:15.277] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:34:15.277] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:34:15.277] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:34:15.278] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:34:15.278] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:34:15.278] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:34:15.278] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:34:15.278] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:34:15.283] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.283] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:34:15.283] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:34:15.283] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:34:15.283] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:34:15.283] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:34:15.284] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.284] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.284] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:34:15.284] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:34:15.300] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:34:15.311] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:34:15.311] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:34:15.356] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:34:15.356] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:34:15.356] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:34:15.388] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:34:15.453] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.470] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.474] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.475] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:34:15.478] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:34:15.486] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864490256
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:15.486] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:34:15.493] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:34:15.493] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:34:15.516] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:34:15.521] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:34:15.529] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:34:15.529] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:34:15.529] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:34:15.529] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:34:15.548] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:34:15.551] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:34:15.551] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:34:15.551] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.553] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:34:15.555] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:34:15.555] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:34:15.557] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:34:15.557] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.558] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:34:15.558] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.558] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.558] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:34:15.558] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:34:15.559] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864490256
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:34:15.559] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:34:15.559] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:34:15.559] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:34:15.559] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:34:15.559] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:34:15.559] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.560] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:34:15.560] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:34:15.560] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:34:15.560] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:34:15.560] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:34:15.560] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:34:15.560] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:34:15.560] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:34:15.560] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:34:15.560] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:34:15.561] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:34:15.561] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:34:15.563] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:34:15.563] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:34:15.564] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:34:15.564] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:34:15.564] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:34:15.564] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:34:15.564] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:34:15.564] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:34:15.565] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:34:15.567] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:15.567] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:34:15.567] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:34:15.567] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:34:15.567] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:34:15.567] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:34:15.567] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.568] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.568] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:34:15.568] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:34:15.586] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:34:15.586] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:34:15.586] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:34:15.597] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:34:15.597] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:34:15.597] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:34:15.616] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:34:15.657] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.659] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:15.660] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:15.660] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:34:15.660] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:34:15.661] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:34:15.661] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864490256
[2026-02-21 18:34:15.661] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:15.661] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:34:15.661] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:15.662] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:34:15.662] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:15.662] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:34:15.662] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:34:15.662] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:34:15.663] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:34:15.664] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:34:15.665] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:34:15.665] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:34:15.665] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:34:15.665] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:34:15.674] [vde] [info] [gRPC Search] === FIRST SEARCH REQUEST ===
[2026-02-21 18:34:15.674] [vde] [info] [gRPC Search] Collection: player_roles
[2026-02-21 18:34:15.674] [vde] [info] [gRPC Search] Query dim: 7
[2026-02-21 18:34:15.674] [vde] [info] [gRPC Search] top_k: 11
[2026-02-21 18:34:15.674] [vde] [info] [gRPC Search] =====================================
[2026-02-21 18:34:15.674] [vde] [info] [VDE C++ API] === FIRST SEARCH CALL ===
[2026-02-21 18:34:15.674] [vde] [info] [VDE C++ API] Query dim: 7
[2026-02-21 18:34:15.674] [vde] [info] [VDE C++ API] top_k: 11
[2026-02-21 18:34:15.674] [vde] [info] [VDE C++ API] ================================
[2026-02-21 18:34:15.674] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] === FIRST SEARCH ===
[2026-02-21 18:34:15.675] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] Collection: player_roles
[2026-02-21 18:34:15.675] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] Query dim: 7, expected: 7
[2026-02-21 18:34:15.675] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] top_k: 11
[2026-02-21 18:34:15.675] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] Normalize: L2-MKL-Advanced
[2026-02-21 18:34:15.675] [vde] [info] [VDECollection::SearchWithoutPredicateFilter] ========================================
[2026-02-21 18:34:15.675] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:34:15.675] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:34:15.675] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:34:15.675] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:34:15.676] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:34:15.683] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:34:15.683] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:34:32.073] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:34:32.073] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:34:32.073] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:34:32.073] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:32.074] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:34:32.074] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:34:32.075] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:34:32.080] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:34:32.081] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:32.081] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:34:32.081] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:32.081] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:32.082] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:34:32.082] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:34:32.083] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864490256
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:34:32.083] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:34:32.084] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:34:32.084] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:34:32.084] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:34:32.084] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:34:32.084] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:34:32.084] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:34:32.084] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:34:32.084] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:32.085] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:34:32.085] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:34:32.085] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:34:32.085] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:34:32.085] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:34:32.085] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:34:32.085] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:34:32.085] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:34:32.085] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:34:32.085] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:34:32.086] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:34:32.086] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:34:32.088] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:34:32.088] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:34:32.088] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:34:32.088] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:34:32.088] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:34:32.088] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:34:32.088] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:34:32.088] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:34:32.088] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:34:32.092] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:34:32.092] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:34:32.092] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:34:32.092] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:34:32.092] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:34:32.092] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:34:32.092] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:32.093] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:32.093] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:34:32.093] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:34:32.102] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:34:32.102] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:34:32.102] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:34:32.117] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:34:32.117] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:34:32.117] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:34:32.131] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:34:32.170] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:34:32.172] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:34:32.173] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:34:32.173] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:34:32.174] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:34:32.174] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] index_ address: 140733998867264
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:34:32.174] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:34:32.175] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:34:32.175] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:34:32.176] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:34:32.176] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:34:32.176] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:34:32.176] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:34:32.176] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:34:32.187] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:45:30.727] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:45:30.727] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:45:30.727] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:45:30.727] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.729] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:45:30.729] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:45:30.729] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:45:30.731] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:45:30.731] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.731] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:45:30.731] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.731] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.732] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.732] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:45:30.733] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:45:30.733] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] index_ address: 140733998867264
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:45:30.733] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:45:30.734] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:45:30.735] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:45:30.735] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:45:30.735] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:45:30.735] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:45:30.735] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:45:30.735] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:45:30.735] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:45:30.735] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.735] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:45:30.736] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:45:30.736] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:45:30.736] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:45:30.736] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:45:30.736] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:45:30.736] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:45:30.736] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:45:30.736] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:45:30.736] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:45:30.739] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:45:30.739] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:45:30.741] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:45:30.741] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:45:30.742] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:45:30.742] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:45:30.742] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:45:30.742] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:45:30.742] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:45:30.742] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:45:30.742] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:45:30.748] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.748] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:45:30.748] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:45:30.748] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:45:30.748] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:45:30.748] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:45:30.748] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.749] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.749] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:45:30.749] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:45:30.760] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:45:30.760] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:45:30.760] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:45:30.779] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:45:30.779] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:45:30.779] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:45:30.796] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:45:30.851] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.857] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.862] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.862] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:45:30.863] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:45:30.863] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489856
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:45:30.863] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:45:30.864] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:45:30.864] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:45:30.864] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:45:30.864] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:45:30.864] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:45:30.864] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:45:30.877] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:45:30.877] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:45:30.877] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:45:30.877] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.877] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:45:30.877] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:45:30.877] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:45:30.881] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:45:30.881] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.881] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:45:30.881] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.881] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.882] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.882] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:45:30.882] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:45:30.882] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489856
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:45:30.882] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:45:30.883] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:45:30.883] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:45:30.883] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:45:30.883] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:45:30.883] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:45:30.883] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:45:30.883] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:45:30.883] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:45:30.883] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.883] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:45:30.883] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:45:30.884] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:45:30.884] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:45:30.884] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:45:30.884] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:45:30.884] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:45:30.884] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:45:30.884] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:45:30.884] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:45:30.885] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:45:30.885] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:45:30.886] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:45:30.886] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:45:30.886] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:45:30.886] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:45:30.886] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:45:30.886] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:45:30.886] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:45:30.886] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:45:30.887] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:45:30.889] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:45:30.890] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:45:30.890] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.890] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:45:30.891] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:45:30.903] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:45:30.903] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:45:30.903] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:45:30.915] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:45:30.916] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:45:30.916] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:45:30.926] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:45:30.969] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:45:30.981] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:45:30.996] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:45:30.997] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:45:30.997] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:45:31.009] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:45:31.009] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:45:31.011] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:45:31.011] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:45:31.047] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:45:31.047] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:45:31.048] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:45:31.049] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:45:31.049] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:45:31.049] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:45:31.055] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:45:31.061] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:09.611] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:09.611] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:09.611] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:09.611] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.614] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:09.614] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:09.614] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:09.616] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:09.616] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.617] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:09.617] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:09.617] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:09.618] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:09.618] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:09.618] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:09.618] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:09.619] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:09.620] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:09.620] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:09.620] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:09.620] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:09.620] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:09.620] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:09.620] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:09.620] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.621] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:09.621] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:09.621] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:09.621] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:09.621] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:09.621] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:09.622] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:09.622] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:09.622] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:09.622] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:09.623] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:09.623] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:09.627] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:09.627] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:09.627] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:09.627] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:09.627] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:09.627] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:09.627] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:09.627] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:09.628] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:09.632] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.632] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:09.632] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:09.632] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:09.632] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:09.643] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:09.644] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:09.644] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:09.669] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:09.669] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:09.669] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:09.689] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:09.785] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:09.787] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:09.788] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:09.788] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:09.789] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] index_ address: 140733998867264
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:09.789] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:09.790] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:09.795] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:09.796] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:09.796] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:09.796] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:09.796] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:09.803] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:09.807] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:09.807] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:09.807] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.811] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:09.812] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:09.816] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:09.869] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:09.870] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.870] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:09.870] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.870] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:09.871] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:09.871] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:09.871] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:09.871] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] index_ address: 140733998867264
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:09.871] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:09.873] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:09.873] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:09.873] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:09.873] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:09.873] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:09.873] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:09.873] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:09.873] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:09.873] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.873] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:09.873] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:09.874] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:09.874] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:09.874] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:09.874] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:09.874] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:09.874] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:09.874] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:09.874] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:09.874] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:09.874] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:09.876] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:09.876] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:09.876] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:09.876] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:09.876] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:09.876] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:09.876] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:09.876] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:09.876] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:09.880] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:09.880] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:09.880] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:09.880] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:09.880] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:09.880] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:09.880] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:09.881] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:09.881] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:09.881] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:09.893] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:09.894] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:09.894] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:09.955] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:09.955] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:09.955] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:09.972] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:10.008] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:10.010] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:10.011] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:10.011] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:10.012] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:10.012] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999136128
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:10.012] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:10.013] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:10.013] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:10.014] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:10.014] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:10.014] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:10.014] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:10.019] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:43.853] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:43.853] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:43.853] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:43.854] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:43.856] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:43.856] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:43.856] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:43.860] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:43.860] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:43.861] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:43.861] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:43.861] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:43.862] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:43.862] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:43.862] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999136128
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:43.862] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:43.863] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:43.864] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:43.864] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:43.864] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:43.864] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:43.864] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:43.864] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:43.864] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:43.864] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:43.865] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:43.865] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:43.865] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:43.865] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:43.865] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:43.865] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:43.865] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:43.865] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:43.865] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:43.865] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:43.866] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:43.866] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:43.868] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:43.868] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:43.868] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:43.868] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:43.868] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:43.868] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:43.868] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:43.868] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:43.868] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:43.871] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:43.872] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:43.872] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:43.872] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:43.872] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:43.883] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:43.883] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:43.883] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:43.900] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:43.900] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:43.900] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:43.917] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:43.966] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:43.968] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:43.969] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:43.969] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:43.969] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:43.969] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 18:51:43.969] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:43.969] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:43.970] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:43.971] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:43.971] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:43.971] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:43.971] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:43.971] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:43.971] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:43.977] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:46.017] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:46.017] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:46.017] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:46.017] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:46.018] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:46.018] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:46.018] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:46.024] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:46.025] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:46.025] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:46.025] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:46.025] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:46.026] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:46.026] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:46.027] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:46.027] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:46.028] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:46.028] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:46.028] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:46.028] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:46.028] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:46.028] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:46.028] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:46.028] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:46.029] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:46.029] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:46.030] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:46.030] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:46.030] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:46.030] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:46.030] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:46.030] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:46.030] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:46.030] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:46.031] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:46.031] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:46.033] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:46.033] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:46.033] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:46.033] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:46.033] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:46.033] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:46.033] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:46.033] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:46.033] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:46.039] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:46.039] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:46.039] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:46.039] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:46.039] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:46.049] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:46.049] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:46.049] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:46.058] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:46.058] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:46.058] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:46.075] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:46.114] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:46.115] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:46.115] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:46.115] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:46.115] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:46.116] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:46.116] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:46.116] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:46.117] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:46.117] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:46.117] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865108880
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:46.117] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:46.118] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:46.118] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:46.118] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:46.118] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:46.118] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:46.119] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:46.126] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:47.563] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:47.563] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:47.563] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:47.563] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:47.564] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:47.564] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:47.564] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:47.568] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:47.568] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:47.569] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:47.569] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:47.569] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:47.570] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:47.570] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:47.570] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865108880
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:47.570] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:47.571] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:47.571] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:47.572] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:47.572] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:47.572] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:47.572] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:47.572] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:47.572] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:47.572] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:47.572] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:47.572] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:47.573] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:47.573] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:47.573] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:47.573] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:47.573] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:47.573] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:47.573] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:47.573] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:47.574] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:47.574] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:47.575] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:47.575] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:47.576] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:47.576] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:47.576] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:47.576] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:47.576] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:47.576] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:47.576] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:47.581] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:47.581] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:47.581] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:47.581] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:47.581] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:47.591] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:47.592] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:47.592] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:47.604] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:47.604] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:47.604] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:47.617] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:47.652] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:47.655] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:47.656] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:47.657] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:47.657] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:47.661] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:47.661] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:47.663] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:47.663] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:47.664] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:47.664] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:47.664] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:47.664] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:47.664] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:47.664] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:47.674] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:50.966] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:50.966] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:50.966] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:50.966] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:50.967] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:50.967] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:50.967] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:50.971] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:50.972] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:50.972] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:50.972] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:50.972] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:50.973] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:50.973] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:50.973] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:50.974] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:50.974] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:50.975] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:50.975] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:50.975] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:50.975] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:50.975] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:50.975] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:50.975] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:50.975] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:50.975] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:50.976] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:50.976] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:50.977] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:50.977] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:50.977] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:50.977] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:50.977] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:50.977] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:50.977] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:50.977] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:50.978] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:50.978] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:50.979] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:50.979] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:50.980] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:50.980] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:50.980] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:50.980] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:50.980] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:50.980] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:50.980] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:50.984] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:50.984] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:50.984] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:50.984] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:50.984] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:50.994] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:50.994] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:50.994] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:51.011] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:51.011] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:51.011] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:51.021] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:51.074] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:51.076] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:51.077] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:51.077] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:51.078] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:51.078] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:51.079] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:51.080] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:51.080] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:51.080] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:51.080] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:51.091] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:52.901] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:52.901] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:52.901] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:52.901] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:52.902] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:52.902] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:52.902] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:52.906] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:52.907] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:52.907] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:52.907] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:52.907] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:52.908] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:52.908] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:52.908] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:52.909] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:52.909] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:52.910] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:52.910] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:52.910] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:52.910] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:52.910] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:52.910] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:52.910] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:52.910] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:52.910] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:52.911] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:52.911] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:52.911] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:52.911] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:52.911] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:52.911] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:52.911] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:52.911] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:52.911] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:52.911] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:52.912] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:52.912] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:52.914] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:52.914] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:52.915] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:52.915] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:52.915] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:52.915] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:52.915] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:52.915] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:52.915] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:52.919] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:52.919] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:52.919] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:52.919] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:52.919] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:52.929] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:52.930] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:52.930] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:52.940] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:52.940] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:52.940] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:52.953] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:52.991] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:52.993] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:52.993] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:52.993] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:52.993] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:52.993] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:52.994] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:52.994] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:52.995] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:52.995] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:52.995] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:52.995] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:52.996] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:52.996] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:52.996] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:52.996] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:52.996] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:52.996] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:53.005] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:55.747] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:55.747] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:55.747] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:55.747] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:55.748] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:55.748] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:55.748] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:55.752] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:55.752] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:55.753] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:55.753] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:55.753] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:55.754] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:55.754] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:55.754] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:55.754] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:55.755] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:55.755] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:55.755] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:55.755] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:55.755] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:55.755] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:55.755] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:55.755] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:55.755] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:55.756] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:55.756] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:55.756] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:55.756] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:55.756] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:55.756] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:55.756] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:55.756] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:55.756] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:55.756] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:55.758] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:55.758] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:55.759] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:55.759] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:55.760] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:55.760] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:55.760] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:55.760] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:55.760] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:55.760] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:55.760] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:55.764] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:55.764] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:55.764] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:55.764] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:55.764] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:55.774] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:55.775] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:55.775] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:55.795] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:55.795] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:55.795] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:55.808] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:55.840] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:55.843] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:55.844] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:55.845] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:55.845] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:55.845] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:55.845] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:55.846] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:55.846] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:55.846] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:55.846] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:55.846] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:55.846] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:55.858] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:55.858] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:55.858] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:55.858] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:55.859] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:51:58.543] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:51:58.543] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:51:58.543] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:51:58.543] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:58.544] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:58.544] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:58.544] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:58.548] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:51:58.548] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:58.549] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:51:58.549] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:58.549] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:58.550] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:58.550] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:58.550] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:58.550] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:58.551] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:58.551] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:58.551] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:58.551] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:58.551] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:58.551] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:58.551] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:51:58.551] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:51:58.551] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:58.552] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:51:58.552] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:51:58.552] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:51:58.552] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:51:58.552] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:51:58.552] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:51:58.552] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:51:58.552] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:51:58.552] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:51:58.552] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:51:58.553] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:51:58.553] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:51:58.555] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:51:58.555] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:51:58.555] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:51:58.555] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:51:58.555] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:51:58.555] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:51:58.555] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:51:58.555] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:51:58.555] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:51:58.560] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:51:58.560] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:51:58.560] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:51:58.560] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:51:58.560] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:51:58.560] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:51:58.560] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:58.560] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:58.561] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:51:58.561] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:51:58.570] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:51:58.571] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:51:58.571] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:51:58.586] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:51:58.586] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:51:58.586] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:51:58.602] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:51:58.632] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:51:58.635] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:51:58.636] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:51:58.636] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:51:58.637] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:51:58.637] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:51:58.639] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:51:58.639] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:51:58.639] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:51:58.640] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:51:58.640] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:51:58.640] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:51:58.640] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:51:58.640] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:51:58.646] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:51:58.648] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:52:01.414] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:52:01.414] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:52:01.414] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:52:01.414] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:01.415] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:52:01.415] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:52:01.415] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:52:01.420] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:52:01.420] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:01.421] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:52:01.421] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:01.421] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:01.422] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:52:01.422] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:52:01.422] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:52:01.422] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:52:01.423] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:52:01.423] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:52:01.423] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:52:01.423] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:52:01.423] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:52:01.423] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:52:01.423] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:52:01.423] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:52:01.423] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:01.424] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:52:01.424] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:52:01.424] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:52:01.425] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:52:01.425] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:52:01.425] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:52:01.425] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:52:01.425] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:52:01.425] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:52:01.425] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:52:01.426] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:52:01.426] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:52:01.427] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:52:01.427] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:52:01.428] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:52:01.428] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:52:01.428] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:52:01.428] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:52:01.428] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:52:01.428] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:52:01.428] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:52:01.432] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:01.432] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:52:01.432] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:01.432] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:52:01.432] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:52:01.443] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:52:01.443] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:52:01.443] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:52:01.461] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:52:01.461] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:52:01.461] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:52:01.474] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:52:01.508] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:52:01.510] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:01.511] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:01.512] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:52:01.512] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:52:01.516] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:52:01.516] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:52:01.517] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:52:01.517] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:52:01.517] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:52:01.518] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:52:01.518] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:52:01.518] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:52:01.518] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:52:01.518] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:52:01.529] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:52:13.207] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:52:13.207] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:52:13.207] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:52:13.207] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:13.208] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:52:13.208] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:52:13.208] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:52:13.212] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:52:13.212] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:13.212] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:52:13.213] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:13.213] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:13.213] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:52:13.214] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:52:13.214] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:52:13.214] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:52:13.215] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:52:13.215] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:52:13.215] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:52:13.215] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:52:13.215] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:52:13.215] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:52:13.215] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:52:13.215] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:13.216] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:52:13.216] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:52:13.216] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:52:13.216] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:52:13.216] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:52:13.216] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:52:13.216] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:52:13.216] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:52:13.216] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:52:13.216] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:52:13.217] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:52:13.217] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:52:13.218] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:52:13.218] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:52:13.219] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:52:13.219] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:52:13.219] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:52:13.219] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:52:13.219] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:52:13.219] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:52:13.219] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:52:13.223] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:52:13.223] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:52:13.223] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:13.223] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:52:13.224] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:52:13.234] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:52:13.234] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:52:13.234] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:52:13.256] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:52:13.256] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:52:13.256] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:52:13.272] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:52:13.299] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:52:13.307] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:52:13.308] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:52:13.308] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:52:13.310] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864573328
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:52:13.310] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:52:13.311] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:52:13.311] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:52:13.312] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:52:13.312] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:52:13.312] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:52:13.312] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:52:13.318] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:53:10.981] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:53:10.982] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:53:10.982] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:53:10.982] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:10.983] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:10.983] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:10.984] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:10.986] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:53:10.986] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:10.987] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:53:10.987] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:10.987] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:10.988] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:10.988] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:10.989] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864573328
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:10.989] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:10.990] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:10.991] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:10.992] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:10.992] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:10.992] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:10.992] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:10.992] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:53:10.992] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:53:10.992] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:10.993] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:10.993] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:10.993] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:10.993] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:53:10.993] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:53:10.993] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:53:10.993] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:53:10.993] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:53:10.993] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:53:10.993] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:53:10.995] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:53:10.995] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:53:10.998] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:53:10.998] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:53:10.998] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:53:10.998] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:53:10.998] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:53:10.998] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:53:10.998] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:53:10.998] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:53:10.999] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:53:11.002] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:11.002] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:53:11.002] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:11.002] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:53:11.002] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:53:11.018] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:53:11.018] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:53:11.018] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:53:11.043] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:53:11.043] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:53:11.043] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:53:11.067] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:53:11.117] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:11.119] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:11.121] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:11.121] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:11.122] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:11.122] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:11.122] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:11.123] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:11.123] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:11.124] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:11.124] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:11.124] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:11.124] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:53:11.129] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:53:13.901] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:53:13.901] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:53:13.901] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:53:13.901] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:13.902] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:13.903] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:13.903] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:13.908] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:53:13.909] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:13.909] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:53:13.909] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:13.909] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:13.910] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:13.910] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:13.911] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:13.911] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:13.911] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:13.912] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:13.912] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:13.913] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:13.913] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:13.913] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:13.913] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:13.913] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:53:13.913] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:53:13.913] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:13.914] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:13.914] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:13.914] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:13.914] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:53:13.914] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:53:13.915] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:53:13.915] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:53:13.915] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:53:13.915] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:53:13.915] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:53:13.916] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:53:13.916] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:53:13.917] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:53:13.917] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:53:13.917] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:53:13.917] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:53:13.917] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:53:13.917] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:53:13.917] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:53:13.917] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:53:13.917] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:53:13.920] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:13.920] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:53:13.920] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:13.920] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:53:13.920] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:53:13.932] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:53:13.932] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:53:13.932] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:53:13.955] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:53:13.955] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:53:13.955] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:53:13.967] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:53:14.002] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:14.003] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:14.004] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:14.005] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:14.005] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:14.005] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:14.005] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:14.006] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:14.007] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:14.007] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:14.007] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:14.007] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:14.007] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:53:14.014] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:53:27.779] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:53:27.780] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:53:27.780] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:53:27.780] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:27.781] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:27.781] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:27.781] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:27.785] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:53:27.785] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:27.785] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:53:27.785] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:27.785] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:27.786] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:27.787] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:27.787] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:27.787] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:27.787] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:27.788] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:27.789] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:27.789] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:27.789] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:27.789] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:27.789] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:27.789] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:53:27.789] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:53:27.789] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:27.790] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:27.790] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:27.791] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:27.791] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:53:27.791] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:53:27.791] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:53:27.791] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:53:27.791] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:53:27.791] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:53:27.791] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:53:27.792] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:53:27.792] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:53:27.793] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:53:27.793] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:53:27.794] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:53:27.794] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:53:27.794] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:53:27.794] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:53:27.794] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:53:27.794] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:53:27.794] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:53:27.798] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:27.798] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:53:27.798] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:27.798] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:53:27.798] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:53:27.808] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:53:27.808] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:53:27.808] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:53:27.823] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:53:27.823] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:53:27.823] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:53:27.846] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:53:27.884] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:27.885] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:27.886] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:27.886] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:27.887] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:27.887] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:27.887] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:27.888] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:27.888] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:27.888] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:27.889] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:27.889] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:27.889] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:27.889] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:53:27.895] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:53:31.825] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:53:31.826] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:53:31.826] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:53:31.826] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:31.826] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:31.826] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:31.827] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:31.830] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:53:31.831] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:31.831] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:53:31.831] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:31.831] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:31.833] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:31.833] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:31.833] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:31.834] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:31.834] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:31.835] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:31.835] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:31.835] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:31.835] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:31.835] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:31.835] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:53:31.835] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:53:31.835] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:31.836] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:53:31.836] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:53:31.836] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:53:31.836] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:53:31.836] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:53:31.836] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:53:31.836] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:53:31.836] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:53:31.836] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:53:31.836] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:53:31.837] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:53:31.837] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:53:31.839] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:53:31.839] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:53:31.839] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:53:31.839] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:53:31.839] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:53:31.839] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:53:31.839] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:53:31.839] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:53:31.839] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:53:31.843] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:53:31.843] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:53:31.843] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:53:31.843] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:53:31.843] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:53:31.843] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:53:31.843] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:31.844] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:31.844] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:53:31.844] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:53:31.856] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:53:31.856] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:53:31.856] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:53:31.871] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:53:31.871] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:53:31.871] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:53:31.882] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:53:31.927] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:53:31.929] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:53:31.930] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:53:31.930] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:53:31.931] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:53:31.931] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:53:31.933] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:53:31.933] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:53:31.933] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:53:31.934] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:53:31.934] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] Query top_k: 11
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:53:31.938] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:58:46.654] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:58:46.654] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:58:46.654] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:58:46.654] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.656] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:46.656] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:46.656] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:46.658] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:58:46.658] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.658] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:58:46.658] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.658] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.659] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.659] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:46.660] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:46.660] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:46.660] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:46.661] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:46.661] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:46.662] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:46.662] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:46.662] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:46.662] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:46.662] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:58:46.662] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:58:46.662] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.662] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:46.663] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:46.663] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:46.663] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:58:46.663] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:58:46.663] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:58:46.663] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:58:46.663] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:58:46.663] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:58:46.663] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:58:46.664] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:58:46.664] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:58:46.666] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:58:46.666] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:58:46.666] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:58:46.666] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:58:46.666] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:58:46.666] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:58:46.666] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:58:46.666] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:58:46.666] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:58:46.671] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.672] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:58:46.672] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.672] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:58:46.672] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:58:46.683] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:58:46.683] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:58:46.683] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:58:46.703] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:58:46.705] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:58:46.705] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:58:46.720] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:58:46.762] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.768] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.769] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.770] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:46.770] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:46.771] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:46.771] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:46.772] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:46.772] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:46.772] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:46.772] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:46.781] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:58:46.781] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:58:46.781] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:58:46.781] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.781] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:46.781] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:46.781] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:46.783] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:58:46.783] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.784] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:58:46.784] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.784] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:46.784] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:46.784] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:46.784] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:46.785] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:46.785] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:46.785] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:46.785] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:46.785] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:46.785] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:46.785] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:58:46.785] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:58:46.785] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.785] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:46.786] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:46.786] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:46.786] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:58:46.786] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:58:46.786] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:58:46.786] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:58:46.786] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:58:46.786] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:58:46.786] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:58:46.787] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:58:46.787] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:58:46.788] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:58:46.788] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:58:46.789] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:58:46.789] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:58:46.789] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:58:46.789] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:58:46.789] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:58:46.789] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:58:46.789] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:58:46.793] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:46.793] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:58:46.793] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.793] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:58:46.793] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:58:46.806] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:58:46.806] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:58:46.806] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:58:46.828] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:58:46.829] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:58:46.829] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:58:46.841] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:58:46.872] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.881] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:46.887] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:46.888] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:46.888] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:46.891] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999742240
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:46.891] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:46.892] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:46.892] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:46.910] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:46.911] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:46.924] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:46.924] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:46.924] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:46.924] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:58:46.936] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:58:55.088] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:58:55.089] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:58:55.089] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:58:55.089] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:55.090] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:55.090] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:55.091] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:55.095] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:58:55.095] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:55.096] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:58:55.096] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:55.096] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:55.097] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:55.097] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:55.098] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999742240
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:55.098] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:55.099] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:55.099] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:55.099] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:55.099] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:55.099] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:55.099] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:58:55.099] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:58:55.099] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:55.100] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:55.100] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:55.100] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:55.100] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:58:55.100] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:58:55.100] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:58:55.100] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:58:55.100] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:58:55.100] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:58:55.100] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:58:55.102] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:58:55.102] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:58:55.103] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:58:55.103] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:58:55.103] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:58:55.103] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:58:55.103] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:58:55.103] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:58:55.103] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:58:55.103] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:58:55.103] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:58:55.107] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:55.107] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:58:55.107] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:55.107] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:58:55.107] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:58:55.117] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:58:55.117] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:58:55.117] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:58:55.130] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:58:55.130] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:58:55.130] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:58:55.145] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:58:55.182] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:55.185] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:55.186] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:55.186] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:55.187] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:55.187] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865243152
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:55.187] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:55.188] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:55.188] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:55.190] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:55.191] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:55.191] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:55.191] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:55.192] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:55.192] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:58:55.196] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:58:56.769] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:58:56.769] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:58:56.769] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:58:56.769] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:56.770] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:56.771] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:56.771] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:56.775] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:58:56.775] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:56.776] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:58:56.776] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:56.776] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:56.777] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:56.777] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:56.777] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865243152
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:56.777] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:56.778] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:56.778] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:56.778] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:56.778] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:56.778] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:56.778] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:56.778] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:58:56.778] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:58:56.778] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:56.779] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:56.779] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:56.779] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:56.779] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:58:56.779] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:58:56.779] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:58:56.779] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:58:56.780] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:58:56.780] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:58:56.780] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:58:56.780] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:58:56.780] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:58:56.782] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:58:56.782] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:58:56.782] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:58:56.782] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:58:56.782] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:58:56.782] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:58:56.782] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:58:56.782] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:58:56.783] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:58:56.787] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:56.787] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:58:56.787] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:56.787] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:58:56.787] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:58:56.798] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:58:56.798] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:58:56.798] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:58:56.812] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:58:56.812] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:58:56.812] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:58:56.829] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:58:56.867] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:56.876] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:56.881] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:56.882] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:56.882] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:56.882] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865243152
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:56.882] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:56.883] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:56.883] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:56.883] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:56.883] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:56.883] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:56.883] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:58:56.898] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:58:58.852] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:58:58.852] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:58:58.852] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:58:58.852] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:58.853] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:58.853] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:58.854] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:58.858] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:58:58.858] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:58.858] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:58:58.858] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:58.858] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:58.859] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:58.859] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:58.860] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:58.860] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865243152
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:58.860] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:58.861] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:58.861] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:58.861] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:58.861] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:58.861] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:58.861] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:58.861] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:58:58.861] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:58:58.861] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:58.862] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:58:58.862] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:58:58.862] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:58:58.863] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:58:58.863] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:58:58.863] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:58:58.863] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:58:58.863] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:58:58.863] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:58:58.863] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:58:58.864] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:58:58.864] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:58:58.865] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:58:58.865] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:58:58.865] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:58:58.865] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:58:58.865] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:58:58.865] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:58:58.865] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:58:58.865] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:58:58.865] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:58:58.866] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:58:58.866] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:58:58.866] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:58:58.866] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:58:58.866] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:58:58.866] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:58:58.866] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:58:58.866] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:58:58.870] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:58:58.870] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:58:58.870] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:58:58.870] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:58:58.870] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:58:58.870] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:58:58.870] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:58.871] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:58.871] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:58:58.871] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:58:58.881] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:58:58.881] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:58:58.881] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:58:58.891] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:58:58.891] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:58:58.891] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:58:58.903] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:58:58.941] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:58:58.943] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:58:58.944] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:58:58.944] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:58:58.944] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:58:58.944] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:58:58.944] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:58:58.946] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:58:58.946] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:58:58.947] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:58:58.947] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:58:58.947] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:58:58.947] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:58:58.952] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:01.691] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:01.692] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:01.692] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:01.692] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:01.692] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:01.693] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:01.693] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:01.697] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:01.697] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:01.697] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:01.697] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:01.697] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:01.698] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:01.698] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:01.699] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:01.699] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:01.699] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:01.699] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:01.700] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:01.701] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:01.701] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:01.701] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:01.701] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:01.701] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:01.701] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:01.701] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:01.701] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:01.701] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:01.702] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:01.702] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:01.702] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:01.703] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:01.703] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:01.703] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:01.703] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:01.703] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:01.703] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:01.703] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:01.704] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:01.704] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:01.705] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:01.705] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:01.706] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:01.706] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:01.706] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:01.706] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:01.706] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:01.706] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:01.706] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:01.710] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:01.710] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:01.710] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:01.710] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:01.710] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:01.720] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:01.721] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:01.721] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:01.735] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:01.735] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:01.735] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:01.751] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:01.792] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:01.793] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:01.794] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:01.794] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:01.794] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:01.794] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:01.794] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:01.795] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:01.795] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:01.796] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:01.796] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:01.796] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:01.797] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:01.797] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:01.798] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:01.798] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:01.798] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:01.798] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:01.813] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:03.097] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:03.097] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:03.097] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:03.097] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:03.098] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:03.098] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:03.098] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:03.102] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:03.102] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:03.103] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:03.103] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:03.103] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:03.104] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:03.104] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:03.104] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:03.104] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:03.105] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:03.105] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:03.105] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:03.105] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:03.105] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:03.105] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:03.105] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:03.105] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:03.105] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:03.106] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:03.106] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:03.106] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:03.107] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:03.107] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:03.107] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:03.107] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:03.107] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:03.107] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:03.107] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:03.108] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:03.108] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:03.109] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:03.109] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:03.109] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:03.109] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:03.109] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:03.109] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:03.110] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:03.110] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:03.110] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:03.110] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:03.114] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:03.114] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:03.114] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:03.114] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:03.114] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:03.114] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:03.114] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:03.115] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:03.115] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:03.115] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:03.125] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:03.125] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:03.125] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:03.143] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:03.143] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:03.143] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:03.159] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:03.203] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:03.205] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:03.205] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:03.206] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:03.206] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:03.206] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:03.207] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:03.207] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:03.207] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:03.208] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:03.208] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:03.208] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:03.208] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:03.208] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:03.215] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:05.285] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:05.286] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:05.286] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:05.286] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:05.286] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:05.286] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:05.287] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:05.291] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:05.291] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:05.292] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:05.292] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:05.292] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:05.293] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:05.293] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:05.293] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:05.293] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:05.294] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:05.294] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:05.294] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:05.294] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:05.294] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:05.294] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:05.294] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:05.294] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:05.294] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:05.295] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:05.295] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:05.295] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:05.296] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:05.296] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:05.296] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:05.296] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:05.296] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:05.296] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:05.296] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:05.297] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:05.297] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:05.298] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:05.298] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:05.298] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:05.298] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:05.298] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:05.298] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:05.298] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:05.298] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:05.298] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:05.299] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:05.299] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:05.299] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:05.299] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:05.299] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:05.299] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:05.299] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:05.299] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:05.303] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:05.303] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:05.303] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:05.303] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:05.303] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:05.313] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:05.313] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:05.313] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:05.323] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:05.323] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:05.323] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:05.345] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:05.379] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:05.384] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:05.386] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:05.387] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:05.387] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:05.387] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:05.388] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:05.390] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:05.392] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:05.392] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:05.392] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:05.392] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:05.392] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:05.400] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:08.460] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:08.460] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:08.460] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:08.460] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:08.461] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:08.461] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:08.461] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:08.465] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:08.465] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:08.466] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:08.466] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:08.466] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:08.467] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:08.467] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:08.467] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:08.467] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:08.468] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:08.468] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:08.468] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:08.468] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:08.468] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:08.468] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:08.468] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:08.468] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:08.468] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:08.469] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:08.469] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:08.469] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:08.469] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:08.469] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:08.469] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:08.469] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:08.469] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:08.469] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:08.469] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:08.470] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:08.470] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:08.472] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:08.472] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:08.472] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:08.472] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:08.472] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:08.472] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:08.473] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:08.473] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:08.473] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:08.473] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:08.473] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:08.477] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:08.477] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:08.477] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:08.477] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:08.477] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:08.487] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:08.487] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:08.487] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:08.498] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:08.498] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:08.498] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:08.512] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:08.548] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:08.549] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:08.550] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:08.550] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:08.551] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:08.551] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:08.551] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:08.552] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:08.552] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:08.552] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:08.552] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:08.552] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:08.552] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:08.558] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:12.848] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:12.848] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:12.848] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:12.848] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:12.849] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:12.849] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:12.849] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:12.853] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:12.853] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:12.854] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:12.854] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:12.854] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:12.855] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:12.855] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:12.856] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:12.856] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 18:59:12.856] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:12.856] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:12.856] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:12.856] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:12.857] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:12.857] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:12.857] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:12.857] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:12.858] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:12.858] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:12.858] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:12.858] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:12.858] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:12.858] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:12.858] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:12.858] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:12.858] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:12.859] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:12.859] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:12.859] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:12.859] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:12.859] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:12.859] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:12.859] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:12.859] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:12.859] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:12.859] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:12.860] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:12.860] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:12.861] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:12.861] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:12.862] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:12.862] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:12.862] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:12.862] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:12.862] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:12.862] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:12.862] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:12.866] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:12.866] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:12.866] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:12.866] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:12.866] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:12.876] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:12.876] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:12.876] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:12.892] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:12.892] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:12.892] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:12.914] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:12.951] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:12.954] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:12.955] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:12.956] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:12.956] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:12.958] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:12.958] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864709344
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:12.959] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:12.960] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:12.960] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:12.960] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:12.960] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:12.960] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:12.973] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 18:59:13.852] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 18:59:13.852] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 18:59:13.852] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 18:59:13.852] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:13.853] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:13.853] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:13.853] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:13.857] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 18:59:13.857] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:13.858] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 18:59:13.858] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:13.858] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:13.859] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:13.859] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:13.859] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864709344
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:13.859] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:13.860] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:13.860] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:13.860] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:13.860] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:13.860] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:13.860] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:13.860] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 18:59:13.860] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 18:59:13.860] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:13.861] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 18:59:13.861] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 18:59:13.861] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 18:59:13.861] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 18:59:13.861] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 18:59:13.861] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 18:59:13.861] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 18:59:13.861] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 18:59:13.861] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 18:59:13.861] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 18:59:13.862] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 18:59:13.862] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 18:59:13.864] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 18:59:13.864] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 18:59:13.864] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 18:59:13.864] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 18:59:13.864] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 18:59:13.864] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 18:59:13.864] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 18:59:13.864] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 18:59:13.864] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 18:59:13.869] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 18:59:13.869] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 18:59:13.869] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:13.869] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 18:59:13.869] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 18:59:13.879] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 18:59:13.879] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 18:59:13.879] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 18:59:13.898] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 18:59:13.898] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 18:59:13.898] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 18:59:13.915] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 18:59:13.951] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 18:59:13.953] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 18:59:13.954] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 18:59:13.954] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 18:59:13.954] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 18:59:13.955] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 18:59:13.955] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 18:59:13.956] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 18:59:13.956] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 18:59:13.956] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 18:59:13.956] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 18:59:13.956] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 18:59:13.956] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 18:59:13.962] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:15:35.422] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:15:35.423] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:15:35.423] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:15:35.423] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:15:35.425] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:15:35.426] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:15:35.426] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:15:35.429] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:15:35.429] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:15:35.430] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:15:35.430] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:15:35.430] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:15:35.431] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:15:35.432] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:15:35.433] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865483616
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:15:35.433] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:15:35.434] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:15:35.434] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:15:35.435] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:15:35.435] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:15:35.435] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:15:35.435] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:15:35.435] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:15:35.435] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:15:35.435] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:15:35.436] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:15:35.436] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:15:35.436] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:15:35.436] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:15:35.436] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:15:35.436] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:15:35.436] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:15:35.436] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:15:35.436] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:15:35.436] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:15:35.438] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:15:35.438] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:15:35.439] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:15:35.439] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:15:35.439] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:15:35.439] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:15:35.439] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:15:35.439] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:15:35.440] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:15:35.440] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:15:35.440] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:15:35.440] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:15:35.443] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:15:35.443] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:15:35.443] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:15:35.443] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:15:35.443] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:15:35.453] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 562 vectors
[2026-02-21 19:15:35.453] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 562 vectors
[2026-02-21 19:15:35.453] [vde] [info] [FaissDriver::BatchAdd] Batch adding 562 vectors to FAISS index
[2026-02-21 19:15:35.465] [vde] [info] [FaissDriver::BatchAdd] Successfully added 562 vectors to FAISS index
[2026-02-21 19:15:35.465] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:15:35.465] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 562 vectors
[2026-02-21 19:15:35.484] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:15:35.522] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 562 vectors
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:15:35.525] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:15:35.526] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:15:35.526] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:15:35.527] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:15:35.527] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:15:35.528] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:15:35.528] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:15:35.528] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:15:35.528] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:15:35.528] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:15:35.528] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:15:35.530] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:22:05.460] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:22:05.461] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:22:05.461] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:22:05.461] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:05.463] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:22:05.463] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:22:05.463] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:22:05.465] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:22:05.465] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:05.465] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:22:05.465] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:22:05.465] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:05.466] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:05.467] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:22:05.467] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:22:05.467] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:22:05.467] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:22:05.468] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:22:05.468] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:22:05.468] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:22:05.469] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:22:05.469] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:22:05.469] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:22:05.469] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:22:05.469] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:22:05.469] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:22:05.469] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:22:05.469] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:05.469] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:22:05.470] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:22:05.470] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:22:05.470] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:22:05.470] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:22:05.470] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:22:05.470] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:22:05.470] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:22:05.470] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:22:05.470] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:22:05.472] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:22:05.472] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:22:05.473] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:22:05.473] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:22:05.474] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:22:05.474] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:22:05.474] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:22:05.474] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:22:05.474] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:22:05.474] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:22:05.474] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:22:05.477] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:05.477] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:22:05.477] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:05.477] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:22:05.477] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:22:05.484] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:05.485] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:05.485] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:05.487] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:05.487] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.487] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:05.489] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.494] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:05.495] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:05.495] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:05.495] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:05.500] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:05.500] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.500] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:05.503] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.508] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:05.510] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:05.510] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:05.510] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:05.518] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:05.518] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.518] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:05.520] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.524] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:05.525] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:05.525] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:05.525] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:05.534] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:05.534] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.534] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:05.535] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.539] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:05.540] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:05.540] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:05.540] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:05.549] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:05.549] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.549] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:05.550] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.554] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:05.555] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 62 vectors
[2026-02-21 19:22:05.555] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 62 vectors
[2026-02-21 19:22:05.555] [vde] [info] [FaissDriver::BatchAdd] Batch adding 62 vectors to FAISS index
[2026-02-21 19:22:05.561] [vde] [info] [FaissDriver::BatchAdd] Successfully added 62 vectors to FAISS index
[2026-02-21 19:22:05.561] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:05.561] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 62 vectors
[2026-02-21 19:22:05.561] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 62 vectors
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:05.564] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:05.565] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:22:05.565] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:22:05.565] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:22:05.565] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:22:05.566] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:22:05.566] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:22:05.566] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:22:05.566] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:22:05.566] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:22:05.566] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:22:05.567] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:22:53.518] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:22:53.518] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:22:53.518] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:22:53.518] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:53.521] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:22:53.521] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:22:53.522] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:22:53.524] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:22:53.525] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:53.525] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:22:53.525] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:22:53.525] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:53.526] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:53.527] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:22:53.528] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:22:53.528] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:22:53.528] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:22:53.529] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:22:53.529] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:22:53.529] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:22:53.529] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:22:53.529] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:22:53.529] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:22:53.529] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:22:53.529] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:22:53.529] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:53.530] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:22:53.530] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:22:53.530] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:22:53.531] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:22:53.531] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:22:53.531] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:22:53.531] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:22:53.531] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:22:53.531] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:22:53.531] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:22:53.532] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:22:53.532] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:22:53.534] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:22:53.534] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:22:53.534] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:22:53.534] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:22:53.534] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:22:53.534] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:22:53.534] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:22:53.534] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:22:53.534] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:22:53.538] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:22:53.538] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:22:53.538] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:53.538] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:22:53.538] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:22:53.545] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:53.545] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:53.545] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:53.547] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:53.547] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.547] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:53.549] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.553] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:53.555] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:53.555] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:53.555] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:53.562] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:53.562] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.562] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:53.563] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.568] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:53.569] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:53.569] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:53.569] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:53.579] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:53.579] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.579] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:53.580] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.584] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:53.585] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:53.585] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:53.585] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:53.594] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:53.594] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.594] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:53.595] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.599] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:53.600] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 100 vectors
[2026-02-21 19:22:53.600] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 100 vectors
[2026-02-21 19:22:53.600] [vde] [info] [FaissDriver::BatchAdd] Batch adding 100 vectors to FAISS index
[2026-02-21 19:22:53.610] [vde] [info] [FaissDriver::BatchAdd] Successfully added 100 vectors to FAISS index
[2026-02-21 19:22:53.610] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.610] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 100 vectors
[2026-02-21 19:22:53.611] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.615] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 100 vectors
[2026-02-21 19:22:53.616] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 62 vectors
[2026-02-21 19:22:53.616] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 62 vectors
[2026-02-21 19:22:53.616] [vde] [info] [FaissDriver::BatchAdd] Batch adding 62 vectors to FAISS index
[2026-02-21 19:22:53.621] [vde] [info] [FaissDriver::BatchAdd] Successfully added 62 vectors to FAISS index
[2026-02-21 19:22:53.621] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:22:53.621] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 62 vectors
[2026-02-21 19:22:53.622] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:22:53.624] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 62 vectors
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:22:53.625] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:22:53.625] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:22:53.625] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:22:53.626] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:22:53.626] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:22:53.626] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:22:53.626] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:22:55.634] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:22:55.634] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:22:55.635] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:24:43.171] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:24:43.171] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:24:43.171] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:24:43.171] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:24:43.172] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:24:43.173] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:24:43.173] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:24:43.174] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:24:43.175] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:24:43.175] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:24:43.175] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:24:43.175] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:24:43.176] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:24:43.176] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:24:43.177] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:24:43.177] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:24:43.178] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:24:43.178] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:24:43.178] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:24:43.178] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:24:43.178] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:24:43.178] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:24:43.178] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:24:43.178] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:24:43.178] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:24:43.179] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:24:43.179] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:24:43.179] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:24:43.179] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:24:43.179] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:24:43.179] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:24:43.179] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:24:43.179] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:24:43.180] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:24:43.180] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:24:43.182] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:24:43.182] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:24:43.183] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:24:43.183] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:24:43.183] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:24:43.183] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:24:43.183] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:24:43.183] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:24:43.183] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:24:43.188] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:24:43.188] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:24:43.188] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:24:43.188] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:24:43.188] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:24:43.189] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.189] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.189] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.191] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.191] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.191] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.192] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.194] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.195] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.195] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.195] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.196] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.196] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.196] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.198] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.199] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.200] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.200] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.201] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.202] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.202] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.202] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.203] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.205] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.206] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.206] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.206] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.209] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.209] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.209] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.211] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.213] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.214] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.214] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.214] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.218] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.218] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.218] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.218] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.220] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.221] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.221] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.221] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.225] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.225] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.225] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.226] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.228] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.229] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.229] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.229] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.232] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.232] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.232] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.233] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.235] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.236] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.236] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.236] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.240] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.240] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.240] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.241] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.243] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.244] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.244] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.244] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.249] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.249] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.249] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.250] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.252] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.253] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.253] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.253] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.258] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.258] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.258] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.262] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.264] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.265] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:24:43.265] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:24:43.265] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:24:43.270] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:24:43.270] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.270] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:24:43.271] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.274] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:24:43.274] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 12 vectors
[2026-02-21 19:24:43.274] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 12 vectors
[2026-02-21 19:24:43.274] [vde] [info] [FaissDriver::BatchAdd] Batch adding 12 vectors to FAISS index
[2026-02-21 19:24:43.275] [vde] [info] [FaissDriver::BatchAdd] Successfully added 12 vectors to FAISS index
[2026-02-21 19:24:43.275] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:24:43.275] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 12 vectors
[2026-02-21 19:24:43.276] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:24:43.276] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 12 vectors
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:24:43.277] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:24:43.277] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:24:43.277] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:24:43.278] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:24:43.278] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:24:43.278] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:24:43.278] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:24:46.286] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:36:35.091] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:36:35.092] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:36:35.092] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:36:35.092] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:36:35.094] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:36:35.094] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:36:35.095] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:36:35.097] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:36:35.097] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:36:35.098] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:36:35.098] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:36:35.098] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:36:35.099] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:36:35.099] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:36:35.100] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:36:35.100] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:36:35.101] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:36:35.101] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:36:35.101] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:36:35.101] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:36:35.101] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:36:35.101] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:36:35.101] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:36:35.101] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:36:35.101] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:36:35.102] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:36:35.102] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:36:35.102] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:36:35.102] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:36:35.102] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:36:35.102] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:36:35.102] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:36:35.102] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:36:35.102] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:36:35.102] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:36:35.103] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:36:35.103] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:36:35.105] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:36:35.105] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:36:35.105] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:36:35.105] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:36:35.105] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:36:35.105] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:36:35.105] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:36:35.105] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:36:35.105] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:36:35.109] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:36:35.109] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:36:35.109] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:36:35.109] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:36:35.109] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:36:35.109] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:36:35.109] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:36:35.110] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:36:35.110] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:36:35.110] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:36:35.111] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.111] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.111] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.112] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.112] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.112] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.113] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.115] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.116] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.116] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.116] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.117] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.117] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.117] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.118] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.121] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.122] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.122] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.122] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.125] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.125] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.125] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.126] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.128] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.129] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.129] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.129] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.133] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.133] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.133] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.135] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.137] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.138] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.138] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.138] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.142] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.142] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.142] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.143] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.145] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.146] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.146] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.146] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.151] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.151] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.151] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.152] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.154] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.155] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.155] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.155] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.159] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.159] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.159] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.160] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.162] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.163] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.163] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.163] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.167] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.167] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.167] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.168] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.170] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.171] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.171] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.171] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.176] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.176] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.176] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.176] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.178] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.179] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.179] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.179] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.183] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.183] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.184] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.184] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.186] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.187] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 50 vectors
[2026-02-21 19:36:35.187] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 50 vectors
[2026-02-21 19:36:35.187] [vde] [info] [FaissDriver::BatchAdd] Batch adding 50 vectors to FAISS index
[2026-02-21 19:36:35.192] [vde] [info] [FaissDriver::BatchAdd] Successfully added 50 vectors to FAISS index
[2026-02-21 19:36:35.192] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.192] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 50 vectors
[2026-02-21 19:36:35.192] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.194] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 50 vectors
[2026-02-21 19:36:35.195] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 12 vectors
[2026-02-21 19:36:35.195] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 12 vectors
[2026-02-21 19:36:35.195] [vde] [info] [FaissDriver::BatchAdd] Batch adding 12 vectors to FAISS index
[2026-02-21 19:36:35.196] [vde] [info] [FaissDriver::BatchAdd] Successfully added 12 vectors to FAISS index
[2026-02-21 19:36:35.196] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:36:35.196] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 12 vectors
[2026-02-21 19:36:35.196] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:36:35.196] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 12 vectors
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:36:35.197] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:36:35.197] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:36:35.197] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:36:35.198] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:36:35.198] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:36:35.198] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:36:38.206] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:36:38.207] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:36:38.207] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:36:38.207] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:37:31.588] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:37:31.588] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:37:31.588] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:37:31.588] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:37:31.589] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:37:31.589] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:37:31.589] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:37:31.589] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:37:31.590] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:37:31.590] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:37:31.590] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:37:31.590] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:37:31.590] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:37:31.590] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:37:31.590] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:37:31.590] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:37:31.590] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:37:31.590] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:37:31.591] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:37:31.591] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:37:31.591] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:37:31.591] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:37:31.591] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:37:31.591] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:37:31.591] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:37:31.591] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:37:31.591] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:37:31.592] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:37:31.592] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:37:31.593] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:37:31.593] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:37:31.593] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:37:31.593] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:37:31.593] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:37:31.593] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:37:31.593] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:37:31.593] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:37:31.593] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:37:31.594] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:37:31.594] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:37:31.594] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:37:31.594] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:37:31.594] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:37:31.594] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:37:31.594] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:37:31.594] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:37:31.596] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:37:31.596] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:37:31.596] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:37:31.596] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:37:31.596] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:40:14.743] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:40:14.743] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:40:14.743] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:40:14.743] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:14.744] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 19:40:14.744] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 19:40:14.745] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 19:40:14.747] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:40:14.747] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:14.748] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:40:14.748] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:14.748] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:14.748] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 19:40:14.748] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 19:40:14.749] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (0 mappings)
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=0, id_map_size=0, deleted_ids=0
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=-1
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=0, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=0, is_trained=true, d=7
[2026-02-21 19:40:14.749] [vde] [error] [FaissDriver::Serialize] Cannot serialize empty index (ntotal=0)
[2026-02-21 19:40:14.749] [vde] [error] [FaissDriver::Serialize] Please add vectors to the index before saving
[2026-02-21 19:40:14.749] [vde] [error] [VDECollection::SaveSnapshot] Failed to serialize index to /data/player_roles/index.snapshot
[2026-02-21 19:40:14.749] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:40:14.749] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:40:14.749] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:14.749] [vde] [info] [CompressString] String size: 27 bytes
[2026-02-21 19:40:14.749] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 36 bytes
[2026-02-21 19:40:14.749] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 0 mappings, next_id=1
[2026-02-21 19:40:14.749] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 0 vectors
[2026-02-21 19:40:14.749] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:40:14.749] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:40:14.749] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:40:14.749] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:40:14.750] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:40:14.751] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:40:14.751] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:40:14.753] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:40:14.753] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:40:14.754] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:40:14.754] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:40:14.754] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:40:14.754] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:40:14.754] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:40:14.754] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:40:14.754] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:40:14.761] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:14.761] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:40:14.761] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:14.761] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:40:14.761] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:40:14.765] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 562 vectors
[2026-02-21 19:40:14.765] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 562 vectors
[2026-02-21 19:40:14.765] [vde] [info] [FaissDriver::BatchAdd] Batch adding 562 vectors to FAISS index
[2026-02-21 19:40:14.777] [vde] [info] [FaissDriver::BatchAdd] Successfully added 562 vectors to FAISS index
[2026-02-21 19:40:14.777] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:40:14.777] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 562 vectors
[2026-02-21 19:40:14.789] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:40:14.822] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 562 vectors
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:14.824] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:14.825] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:40:14.825] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:40:14.826] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:14.826] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:14.827] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:14.827] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:14.827] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:14.827] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:14.827] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:14.827] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] Index ntotal: 562
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] Storage ntotal: 562
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] Query top_k: 1
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] levels.size(): 562
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:40:16.836] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:40:43.965] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:40:43.966] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:40:43.966] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:40:43.966] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:43.968] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:40:43.968] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:40:43.969] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:40:43.973] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:40:43.974] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:43.974] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:40:43.974] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:43.974] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:43.975] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:43.976] [vde] [info] [CompressString] String size: 22288 bytes
[2026-02-21 19:40:43.976] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1341 bytes
[2026-02-21 19:40:43.976] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (562 mappings)
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] index_ address: 140733865489664
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=562, id_map_size=562, deleted_ids=0
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=562, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=562, is_trained=true, d=7
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:43.976] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:43.977] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:43.977] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:43.978] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:43.978] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:43.978] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:43.978] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:43.978] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:40:43.978] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:40:43.978] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:43.978] [vde] [info] [CompressString] String size: 12174 bytes
[2026-02-21 19:40:43.978] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1290 bytes
[2026-02-21 19:40:43.979] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 562 mappings, next_id=563
[2026-02-21 19:40:43.979] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:40:43.979] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 562 vectors
[2026-02-21 19:40:43.979] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:40:43.979] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:40:43.979] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:40:43.979] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:40:43.979] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:40:43.980] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:40:43.980] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:40:43.982] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:40:43.982] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:40:43.983] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:40:43.983] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:40:43.983] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:40:43.983] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:40:43.983] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:40:43.983] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:40:43.983] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:40:43.986] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:43.986] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:40:43.986] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:43.986] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:40:43.986] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:40:44.003] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:40:44.003] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:40:44.003] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:40:44.021] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:40:44.021] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:40:44.021] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:40:44.035] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:40:44.088] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.100] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:44.111] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:44.112] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:40:44.113] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:40:44.123] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:40:44.123] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:40:44.123] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.123] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:40:44.123] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:44.123] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:44.124] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:44.124] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:40:44.126] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:44.126] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:44.129] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:44.132] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:44.138] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:44.138] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:44.138] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:44.138] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:44.146] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:40:44.146] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:40:44.146] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:40:44.146] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:44.148] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:40:44.148] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:40:44.148] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:40:44.160] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:40:44.160] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:44.161] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:40:44.161] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:44.161] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:44.162] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:40:44.162] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:40:44.163] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:44.163] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:44.165] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:44.165] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:44.165] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:44.165] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:44.165] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:44.165] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:44.165] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:40:44.165] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:40:44.165] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:44.166] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:40:44.166] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:40:44.167] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:40:44.167] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:40:44.167] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:40:44.167] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:40:44.167] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:40:44.167] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:40:44.167] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:40:44.167] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:40:44.168] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:40:44.168] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:40:44.169] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:40:44.169] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:40:44.170] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:40:44.170] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:40:44.170] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:40:44.170] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:40:44.170] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:40:44.170] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:40:44.170] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:40:44.176] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:44.176] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:40:44.176] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:40:44.176] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:40:44.176] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:40:44.176] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:40:44.176] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:44.178] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:44.178] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:40:44.178] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:40:44.190] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:40:44.190] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:40:44.190] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:40:44.205] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:40:44.206] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:40:44.206] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:40:44.221] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:40:44.271] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.278] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:44.283] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:44.287] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:40:44.288] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:40:44.300] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:44.300] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:40:44.303] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:44.303] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:44.304] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:44.304] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:44.304] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:44.304] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:44.304] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:44.304] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:40:44.334] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:40:54.999] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:40:54.999] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:40:54.999] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:40:54.999] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:55.001] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:40:55.001] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:40:55.001] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:40:55.005] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:40:55.006] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:55.006] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:40:55.006] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:55.006] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:55.007] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:55.008] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:40:55.009] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:40:55.009] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:55.009] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:55.010] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:55.010] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:55.011] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:55.011] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:55.011] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:55.011] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:55.011] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:40:55.011] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:40:55.011] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:55.012] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:40:55.012] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:40:55.012] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:40:55.012] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:40:55.012] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:40:55.012] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:40:55.012] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:40:55.012] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:40:55.012] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:40:55.012] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:40:55.014] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:40:55.014] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:40:55.015] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:40:55.015] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:40:55.015] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:40:55.015] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:40:55.015] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:40:55.015] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:40:55.015] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:40:55.015] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:40:55.016] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:40:55.020] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:40:55.020] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:40:55.020] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:55.020] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:40:55.020] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:40:55.032] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:40:55.032] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:40:55.032] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:40:55.045] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:40:55.045] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:40:55.045] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:40:55.067] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:40:55.098] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:40:55.100] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:40:55.101] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:40:55.102] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:40:55.102] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:40:55.102] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:40:55.103] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:40:55.103] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:40:55.103] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:40:55.103] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:40:55.106] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:40:55.107] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:40:55.107] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:41:33.998] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:41:33.998] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:41:33.998] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:41:33.998] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:33.999] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:33.999] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:34.000] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:34.004] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:41:34.004] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:34.004] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:41:34.004] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:34.004] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:34.005] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:34.005] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:34.005] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:34.006] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:34.006] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:34.007] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:34.007] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:34.007] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:34.007] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:34.007] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:34.007] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:34.007] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:41:34.007] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:41:34.007] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:34.008] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:34.008] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:34.008] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:34.008] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:41:34.008] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:41:34.008] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:41:34.008] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:41:34.008] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:41:34.008] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:41:34.008] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:41:34.010] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:41:34.010] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:41:34.011] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:41:34.011] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:41:34.012] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:41:34.012] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:41:34.012] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:41:34.012] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:41:34.012] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:41:34.012] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:41:34.012] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:41:34.015] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:34.015] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:41:34.015] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:41:34.015] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:41:34.015] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:41:34.015] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:41:34.015] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:34.016] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:34.016] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:41:34.016] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:41:34.026] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:41:34.026] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:41:34.026] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:41:34.040] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:41:34.040] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:41:34.040] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:41:34.060] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:41:34.099] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:41:34.102] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:34.103] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:34.104] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:34.104] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:34.104] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:34.104] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:41:34.104] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:34.105] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:34.106] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:34.106] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:34.106] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:34.106] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:41:34.114] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:41:40.101] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:41:40.101] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:41:40.101] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:41:40.101] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:40.102] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:40.102] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:40.102] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:40.107] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:41:40.107] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:40.108] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:41:40.108] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:40.108] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:40.109] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:40.109] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:40.109] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:40.109] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:40.110] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:40.110] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:40.110] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:40.110] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:41:40.110] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:41:40.110] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:40.111] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:40.111] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:40.111] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:40.112] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:41:40.112] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:41:40.112] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:41:40.112] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:41:40.112] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:41:40.112] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:41:40.112] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:41:40.113] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:41:40.113] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:41:40.114] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:41:40.114] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:41:40.115] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:41:40.115] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:41:40.115] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:41:40.115] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:41:40.115] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:41:40.115] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:41:40.115] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:41:40.120] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:40.120] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:41:40.120] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:40.120] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:41:40.120] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:41:40.131] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:41:40.131] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:41:40.131] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:41:40.147] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:41:40.147] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:41:40.147] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:41:40.165] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:41:40.208] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:40.210] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:40.212] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:40.213] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:40.213] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:40.214] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:40.214] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:40.215] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:40.217] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:40.217] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:40.217] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:40.217] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:40.217] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:40.225] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:41:40.225] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:41:40.227] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:41:41.760] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:41:41.760] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:41:41.760] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:41:41.760] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:41.761] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:41.761] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:41.761] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:41.765] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:41:41.766] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:41.766] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:41:41.766] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:41.766] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:41.767] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:41.767] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:41.768] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:41.768] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:41.768] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:41.769] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:41.769] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:41.769] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:41.769] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:41.769] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:41.769] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:41.769] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:41:41.770] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:41:41.770] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:41.770] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:41.770] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:41.770] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:41.771] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:41:41.771] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:41:41.771] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:41:41.771] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:41:41.771] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:41:41.771] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:41:41.771] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:41:41.772] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:41:41.772] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:41:41.773] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:41:41.773] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:41:41.774] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:41:41.774] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:41:41.774] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:41:41.774] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:41:41.774] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:41:41.774] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:41:41.774] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:41:41.778] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:41.778] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:41:41.778] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:41.778] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:41:41.778] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:41:41.788] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:41:41.788] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:41:41.788] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:41:41.803] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:41:41.803] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:41:41.803] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:41:41.813] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:41:41.855] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:41.872] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:41.874] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:41.874] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:41.874] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:41.874] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:41.875] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:41.876] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:41.878] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:41.878] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:41.879] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:41.879] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:41.879] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:41.879] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:41:41.886] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:41:55.653] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:41:55.653] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:41:55.653] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:41:55.653] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:55.654] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:55.654] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:55.654] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:55.658] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:41:55.658] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:55.659] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:41:55.659] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:55.659] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:55.660] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:55.660] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:55.660] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:55.660] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:55.661] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:55.661] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:55.661] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:55.661] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:55.661] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:55.661] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:55.661] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:41:55.661] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:41:55.661] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:55.662] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:41:55.662] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:41:55.662] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:41:55.663] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:41:55.663] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:41:55.663] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:41:55.663] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:41:55.663] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:41:55.663] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:41:55.663] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:41:55.664] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:41:55.664] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:41:55.665] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:41:55.665] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:41:55.665] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:41:55.665] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:41:55.665] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:41:55.665] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:41:55.666] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:41:55.666] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:41:55.666] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:41:55.666] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:41:55.670] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:41:55.670] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:41:55.670] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:55.670] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:41:55.670] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:41:55.681] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:41:55.681] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:41:55.681] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:41:55.690] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:41:55.690] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:41:55.690] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:41:55.709] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:41:55.735] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:41:55.736] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:41:55.737] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:41:55.738] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:41:55.738] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:41:55.738] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:41:55.738] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:41:55.740] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:41:55.740] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:41:55.741] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:41:55.741] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:41:55.741] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:41:55.741] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:41:55.759] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:41:55.759] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:41:55.759] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:41:55.759] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:41:55.759] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:41:55.765] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:10.551] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:10.551] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:10.551] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:10.551] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.552] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:10.552] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:10.552] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:10.556] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:10.556] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.556] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:10.557] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.557] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.557] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:10.558] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:10.558] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:10.558] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:10.559] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:10.559] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:10.559] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:10.559] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:10.559] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:10.559] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:10.559] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:10.559] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:10.559] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.560] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:10.560] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:10.560] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:10.560] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:10.560] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:10.560] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:10.560] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:10.560] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:10.560] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:10.560] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:10.561] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:10.561] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:10.563] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:10.563] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:10.563] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:10.563] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:10.563] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:10.563] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:10.563] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:10.563] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:10.564] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:10.568] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.568] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:10.568] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.568] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:10.568] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:10.579] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:10.579] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:10.579] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:10.592] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:10.592] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:10.592] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:10.607] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:10.647] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.652] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.653] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:10.653] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:10.657] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:10.657] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:10.658] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:10.658] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:10.658] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:10.658] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:10.659] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:10.659] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:10.659] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:10.659] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:10.664] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:10.870] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:10.870] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:10.870] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:10.870] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.870] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:10.870] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:10.870] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:10.874] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:10.874] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.875] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:10.875] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.875] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.876] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:10.876] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:10.876] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:10.876] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:10.877] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:10.877] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:10.877] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.877] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:10.877] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:10.877] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:10.877] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:10.877] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:10.877] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:10.877] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:10.877] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:10.877] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:10.878] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:10.878] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:10.879] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:10.879] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:10.880] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:10.880] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:10.880] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:10.880] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:10.880] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:10.880] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:10.880] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:10.883] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:10.883] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:10.883] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.883] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:10.883] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:10.895] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:10.895] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:10.895] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:10.906] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:10.906] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:10.906] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:10.921] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:10.952] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.954] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:10.955] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:10.955] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:10.956] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:10.959] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:10.959] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:10.960] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:10.960] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:10.962] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:10.962] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:10.963] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:10.963] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:10.963] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:10.963] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:10.974] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:10.975] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:10.975] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:10.975] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:10.975] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:10.975] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:13.484] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:13.484] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:13.484] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:13.484] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:13.485] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:13.485] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:13.485] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:13.489] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:13.489] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:13.490] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:13.490] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:13.490] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:13.491] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:13.491] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:13.491] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:13.491] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:13.492] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:13.492] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:13.492] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:13.492] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:13.492] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:13.492] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:13.492] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:13.492] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:13.492] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:13.493] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:13.493] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:13.493] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:13.493] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:13.493] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:13.493] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:13.493] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:13.493] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:13.493] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:13.493] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:13.494] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:13.494] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:13.496] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:13.496] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:13.496] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:13.496] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:13.496] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:13.496] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:13.497] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:13.497] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:13.497] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:13.501] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:13.501] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:13.501] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:13.501] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:13.501] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:13.511] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:13.512] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:13.512] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:13.527] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:13.527] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:13.527] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:13.540] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:13.586] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:13.588] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:13.589] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:13.589] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:13.589] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:13.594] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:13.594] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:13.595] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:13.595] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:13.595] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:13.596] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:13.597] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:13.597] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:13.597] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:13.597] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:13.608] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:15.874] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:15.874] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:15.874] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:15.874] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:15.875] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:15.875] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:15.875] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:15.879] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:15.879] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:15.880] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:15.880] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:15.880] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:15.881] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:15.881] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:15.881] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:15.881] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:15.882] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:15.882] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:15.882] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:15.882] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:15.882] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:15.882] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:15.882] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:15.882] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:15.882] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:15.883] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:15.883] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:15.883] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:15.883] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:15.883] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:15.883] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:15.883] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:15.883] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:15.883] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:15.883] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:15.884] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:15.884] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:15.886] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:15.886] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:15.886] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:15.886] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:15.886] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:15.886] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:15.886] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:15.886] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:15.887] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:15.887] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:15.887] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:15.887] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:15.887] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:15.887] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:15.887] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:15.887] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:15.887] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:15.891] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:15.891] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:15.891] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:15.891] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:15.892] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:15.901] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:15.901] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:15.901] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:15.916] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:15.916] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:15.916] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:15.929] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:15.964] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:15.966] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:15.967] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:15.968] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:15.968] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:15.969] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:15.969] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:15.970] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:15.972] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:15.972] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:15.972] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:15.972] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:15.972] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:15.980] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:15.984] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:15.984] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:15.984] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:47.562] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:47.562] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:47.562] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:47.562] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:47.563] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:47.563] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:47.564] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:47.567] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:47.567] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:47.567] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:47.567] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:47.567] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:47.568] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:47.568] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:47.568] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:47.568] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:47.569] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:47.569] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:47.569] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:47.569] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:47.569] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:47.569] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:47.569] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:47.569] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:47.569] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:47.570] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:47.570] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:47.570] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:47.570] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:47.570] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:47.570] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:47.570] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:47.570] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:47.570] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:47.570] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:47.571] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:47.571] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:47.573] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:47.573] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:47.573] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:47.573] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:47.573] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:47.573] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:47.573] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:47.573] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:47.573] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:47.576] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:47.577] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:47.577] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:47.577] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:47.577] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:47.587] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:47.587] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:47.587] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:47.598] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:47.598] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:47.598] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:47.613] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:47.661] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:47.663] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:47.664] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:47.664] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:47.664] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:47.666] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:47.666] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:47.666] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:47.666] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:47.666] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:47.666] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:47.667] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:47.667] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:47.667] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:47.667] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:47.667] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:47.668] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:47.669] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:47.669] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:47.669] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:47.669] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:47.680] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:47.681] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:47.681] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:47.681] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:55.703] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:55.703] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:55.703] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:55.703] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:55.704] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:55.704] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:55.704] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:55.709] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:55.709] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:55.710] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:55.710] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:55.710] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:55.711] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:55.711] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:55.711] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:55.711] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:55.712] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:55.712] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:55.712] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:55.712] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:55.712] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:55.712] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:55.712] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:55.712] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:55.712] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:55.713] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:55.713] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:55.713] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:55.713] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:55.713] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:55.713] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:55.713] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:55.713] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:55.713] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:55.713] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:55.714] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:55.714] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:55.716] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:55.716] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:55.716] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:55.716] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:55.716] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:55.716] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:55.716] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:55.716] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:55.716] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:55.721] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:55.721] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:55.721] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:55.721] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:55.721] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:55.732] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:55.732] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:55.732] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:55.743] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:55.743] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:55.743] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:55.759] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:55.803] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:55.810] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:55.811] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:55.811] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:55.813] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:55.813] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:55.816] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:55.817] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:55.819] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:55.819] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:55.819] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:55.819] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:55.836] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:55.839] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:58.190] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:58.190] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:58.190] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:58.190] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:58.191] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:58.191] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:58.192] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:58.196] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:58.196] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:58.197] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:58.197] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:58.197] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:58.198] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:58.198] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:58.198] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:58.198] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:58.199] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:58.199] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:58.199] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:58.199] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:58.199] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:58.199] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:58.199] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:58.199] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:58.199] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:58.200] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:58.200] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:58.200] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:58.200] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:58.200] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:58.200] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:58.200] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:58.200] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:58.200] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:58.200] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:58.202] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:58.202] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:58.203] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:58.203] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:58.204] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:58.204] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:58.204] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:58.204] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:58.204] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:58.204] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:58.204] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:58.208] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:58.208] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:58.208] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:58.209] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:58.209] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:58.218] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:58.219] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:58.219] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:58.234] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:58.235] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:58.235] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:58.247] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:58.285] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:58.289] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:58.290] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:58.290] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:58.290] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:58.292] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:58.292] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:58.293] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:58.293] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:58.293] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:58.294] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:58.294] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:58.294] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:58.294] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:58.294] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:58.306] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:42:59.193] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:59.193] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:59.193] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:59.193] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.194] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:59.194] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:59.194] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:59.198] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:59.199] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.199] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:59.199] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.199] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.200] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.200] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:59.201] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:59.201] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:59.201] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:59.202] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:59.202] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:59.202] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:59.202] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:59.202] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:59.202] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:59.202] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:59.202] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:59.202] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.203] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:59.203] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:59.204] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:59.204] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:59.204] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:59.204] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:59.204] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:59.204] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:59.204] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:59.204] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:59.205] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:59.205] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:59.208] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:59.208] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:59.209] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:59.209] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:59.209] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:59.209] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:59.209] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:59.209] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:59.209] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:59.213] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.213] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:59.213] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.213] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:59.213] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:59.226] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:59.226] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:59.226] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:59.253] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:59.253] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:59.253] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:59.269] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:59.313] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.338] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.339] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.340] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:59.340] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:59.341] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:59.341] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:59.342] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:59.342] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:59.342] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:59.343] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:59.343] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:59.343] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:59.343] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:59.449] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:42:59.450] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:42:59.450] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:42:59.450] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.452] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:59.452] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:59.452] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:59.454] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:42:59.455] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.455] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:42:59.455] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.455] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.456] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:59.456] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:59.456] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:59.456] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:59.456] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:59.456] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:59.456] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:42:59.456] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:42:59.456] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.457] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:42:59.457] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:42:59.457] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:42:59.457] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:42:59.457] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:42:59.457] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:42:59.457] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:42:59.457] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:42:59.457] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:42:59.457] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:42:59.458] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:42:59.458] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:42:59.459] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:42:59.459] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:42:59.459] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:42:59.460] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:42:59.460] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:42:59.460] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:42:59.460] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:42:59.460] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:42:59.460] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:42:59.461] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:42:59.461] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:42:59.461] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:42:59.461] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:42:59.461] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:42:59.461] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:42:59.461] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.462] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.462] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:42:59.462] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:42:59.471] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:42:59.471] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:42:59.471] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:42:59.479] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:42:59.479] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:42:59.479] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:42:59.487] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:42:59.528] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.529] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:42:59.530] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:42:59.530] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:42:59.531] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:42:59.531] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:42:59.531] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:42:59.532] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:42:59.532] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:42:59.533] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:42:59.533] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:42:59.533] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:42:59.533] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:42:59.544] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:42:59.544] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:42:59.547] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:01.459] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:01.459] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:01.459] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:01.459] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:01.460] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:01.460] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:01.460] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:01.464] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:01.464] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:01.464] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:01.465] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:01.465] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:01.465] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:01.466] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:01.466] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:01.466] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:01.467] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:01.467] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:01.467] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:01.467] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:01.467] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:01.467] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:01.467] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:01.467] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:01.467] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:01.468] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:01.468] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:01.468] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:01.468] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:01.468] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:01.468] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:01.468] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:01.469] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:01.469] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:01.469] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:01.470] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:01.470] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:01.471] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:01.471] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:01.472] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:01.472] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:01.472] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:01.472] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:01.472] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:01.472] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:01.472] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:01.476] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:01.476] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:01.476] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:01.476] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:01.476] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:01.476] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:01.476] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:01.476] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:01.477] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:01.477] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:01.486] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:01.487] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:01.487] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:01.497] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:01.497] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:01.497] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:01.512] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:01.549] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:01.562] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:01.565] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:01.565] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:01.565] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:01.577] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:01.578] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:01.579] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:01.579] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:01.585] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:01.585] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:01.586] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:01.586] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:01.586] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:01.586] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:43:01.593] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:03.125] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:03.125] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:03.125] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:03.125] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:03.126] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:03.126] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:03.127] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:03.131] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:03.131] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:03.132] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:03.132] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:03.132] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:03.133] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:03.133] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:03.133] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:03.133] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:03.134] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:03.135] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:03.135] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:03.135] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:03.135] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:03.135] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:03.135] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:03.135] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:03.135] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:03.136] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:03.136] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:03.136] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:03.136] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:03.136] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:03.136] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:03.136] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:03.136] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:03.136] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:03.136] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:03.137] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:03.138] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:03.139] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:03.139] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:03.139] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:03.139] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:03.139] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:03.139] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:03.140] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:03.140] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:03.140] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:03.140] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:03.140] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:03.143] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:03.143] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:03.143] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:03.143] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:03.143] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:03.153] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:03.153] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:03.153] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:03.168] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:03.168] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:03.168] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:03.180] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:03.223] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:03.224] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:03.225] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:03.225] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:03.225] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:03.226] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:03.226] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:03.227] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:03.227] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:03.227] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:03.227] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:43:03.231] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:04.052] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:04.052] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:04.052] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:04.052] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:04.053] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:04.053] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:04.053] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:04.057] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:04.057] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:04.057] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:04.057] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:04.057] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:04.057] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:04.057] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:04.057] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:04.057] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:04.058] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:04.058] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:04.058] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:04.058] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:04.059] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:04.059] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:04.059] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:04.059] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:04.060] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:04.060] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:04.060] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:04.060] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:04.060] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:04.060] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:04.060] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:04.060] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:04.060] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:04.061] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:04.061] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:04.061] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:04.061] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:04.061] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:04.061] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:04.061] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:04.061] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:04.061] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:04.061] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:04.062] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:04.062] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:04.063] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:04.063] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:04.064] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:04.064] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:04.064] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:04.064] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:04.064] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:04.064] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:04.064] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:04.068] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:04.068] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:04.068] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:04.068] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:04.068] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:04.068] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:04.068] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:04.069] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:04.069] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:04.069] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:04.079] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:04.080] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:04.080] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:04.091] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:04.092] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:04.092] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:04.106] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:04.135] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:04.141] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:04.142] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:04.143] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:04.143] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:04.146] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:04.146] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:04.146] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:04.147] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:04.147] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:04.147] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:04.147] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:04.147] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:04.148] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:04.148] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:04.152] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:04.152] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:04.153] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:04.153] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:04.153] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:04.153] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:43:04.164] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:20.778] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:20.778] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:20.778] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:20.778] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:20.779] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:20.779] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:20.779] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:20.783] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:20.783] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:20.784] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:20.784] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:20.784] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:20.785] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:20.785] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:20.785] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:20.785] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:20.786] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:20.786] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:20.786] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:20.786] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:20.786] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:20.786] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:20.786] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:20.786] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:20.786] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:20.786] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:20.787] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:20.787] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:20.787] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:20.787] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:20.788] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:20.788] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:20.788] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:20.788] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:20.788] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:20.788] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:20.789] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:20.789] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:20.790] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:20.790] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:20.790] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:20.790] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:20.790] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:20.790] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:20.790] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:20.790] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:20.791] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:20.795] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:20.795] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:20.795] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:20.795] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:20.795] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:20.805] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:20.805] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:20.805] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:20.818] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:20.818] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:20.818] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:20.834] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:20.871] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:20.873] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:20.875] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:20.875] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:20.876] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:20.876] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:20.876] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:20.878] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:20.878] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:20.879] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:20.879] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:20.880] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:20.880] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:20.880] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:20.880] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:43:20.900] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:25.082] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:25.083] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:25.083] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:25.083] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:25.084] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:25.084] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:25.085] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:25.089] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:25.089] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:25.090] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:25.090] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:25.090] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:25.091] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:25.091] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:25.091] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] index_ address: 140733864930496
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:25.091] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:25.092] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:25.092] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:25.092] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:25.092] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:25.092] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:25.092] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:25.092] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:25.092] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:25.092] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:25.093] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:25.093] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:25.093] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:25.093] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:25.093] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:25.093] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:25.093] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:25.093] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:25.093] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:25.093] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:25.095] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:25.095] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:25.096] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:25.096] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:25.097] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:25.097] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:25.097] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:25.097] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:25.097] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:25.097] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:25.097] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:25.101] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:25.101] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:25.101] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:25.101] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:25.101] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:25.112] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:25.112] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:25.112] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:25.127] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:25.127] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:25.127] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:25.143] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:25.186] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:25.188] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:25.189] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:25.189] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:25.190] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:25.193] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999365312
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:25.193] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:25.194] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:25.196] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:25.197] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:25.197] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:25.197] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:25.197] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] entry_point: 511
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] M (neighbors at level 1): 32
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] Storage exists: true, own_fields: true
[2026-02-21 19:43:25.210] [vde] [info] [FaissDriver::Search] ============================================
[2026-02-21 19:43:26.615] [vde] [info] [VDEEngine::DeleteCollection] Deleting collection 'player_roles'
[2026-02-21 19:43:26.615] [vde] [info] [VDEEngine::DeleteCollection] Destroying storage resources for 'player_roles'
[2026-02-21 19:43:26.615] [vde] [info] [BtrieveSpaceDriver::Destroy] Destroying Btrieve Space: /data/player_roles/vectors.space
[2026-02-21 19:43:26.615] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:26.616] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:26.616] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:26.616] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:26.620] [vde] [info] [BtrieveSpaceDriver::Destroy] Snapshot file deleted: /data/player_roles/snapshots.btr
[2026-02-21 19:43:26.620] [vde] [info] [BtrieveSpaceDriver::Destroy] ID mappings file deleted: /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:26.621] [vde] [info] [BtrieveSpaceDriver::Destroy] Btrieve Space destroyed successfully: /data/player_roles/vectors.space
[2026-02-21 19:43:26.621] [vde] [info] [VDEEngine::CloseCollection] Closing collection 'player_roles'
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::~VDECollection] Destroying collection 'player_roles'
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::~VDECollection] Save Snapshot before we destroy the collection
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:26.621] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:26.622] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:26.622] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:26.622] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999365312
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:26.622] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:26.623] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:26.623] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:26.623] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:26.623] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:26.623] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:26.623] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:26.623] [vde] [info] [VDECollection::~VDECollection] Save Snapshot completed.
[2026-02-21 19:43:26.623] [vde] [info] [VDECollection::~VDECollection] Releasing storage driver
[2026-02-21 19:43:26.623] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saving ID mappings to /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:26.624] [vde] [info] [CompressString] String size: 12438 bytes
[2026-02-21 19:43:26.624] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1283 bytes
[2026-02-21 19:43:26.624] [vde] [info] [BtrieveSpaceDriver::SaveIdMappings] Saved 574 mappings, next_id=575
[2026-02-21 19:43:26.624] [vde] [info] [VDECollection::~VDECollection] Releasing index driver (FAISS index will be freed)
[2026-02-21 19:43:26.624] [vde] [info] [FaissDriver::~FaissDriver] Releasing FAISS index with 574 vectors
[2026-02-21 19:43:26.624] [vde] [info] [FaissDriver::~FaissDriver] FAISS index memory released
[2026-02-21 19:43:26.624] [vde] [info] [VDECollection::~VDECollection] Collection 'player_roles' destroyed successfully
[2026-02-21 19:43:26.624] [vde] [info] [VDEEngine::CloseCollection] Collection 'player_roles' closed successfully
[2026-02-21 19:43:26.624] [vde] [info] Removing collection directory: /data/player_roles
[2026-02-21 19:43:26.624] [vde] [info] [VDEEngine::DeleteCollection] Removing collection directory: /data/player_roles
[2026-02-21 19:43:26.625] [vde] [info] [VDEEngine::DeleteCollection] Collection directory removed successfully: /data/player_roles
[2026-02-21 19:43:26.626] [vde] [info] [VDEEngine::DeleteCollection] Collection 'player_roles' deleted successfully
[2026-02-21 19:43:26.627] [vde] [info] Creating collection 'player_roles' with index_driver=IndexDriverType::FAISS, storage=StorageType::BTRIEVE_SPACE, dim=7, config=
[2026-02-21 19:43:26.627] [vde] [info] Creating collection directory: /data/player_roles
[2026-02-21 19:43:26.627] [vde] [info] Creating VDECollection instance for 'player_roles'
[2026-02-21 19:43:26.627] [vde] [info] Initializing collection 'player_roles'...
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] name=player_roles, index_driver=IndexDriverType::FAISS, storage_type=StorageType::BTRIEVE_SPACE, dimension=7, normalize=auto
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Collection data directory: /data/player_roles
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Auto-selected L2 normalization for COSINE metric
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] collection='player_roles', normalize_driver='L2-MKL-Advanced' (L2)
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Creating index driver: IndexDriverType::FAISS
[2026-02-21 19:43:26.627] [vde] [info] [FaissDriver] Created HNSW index: dim=7, M=16, ef_construct=200, ef_search=50, own_fields=true
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Index driver created successfully
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Creating storage driver: StorageType::BTRIEVE_SPACE
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Storage driver created successfully
[2026-02-21 19:43:26.627] [vde] [info] [VDECollection::Init] Opening storage driver...
[2026-02-21 19:43:26.627] [vde] [info] [BtrieveSpaceDriver::Open] Opening Btrieve Space in: /data/player_roles
[2026-02-21 19:43:26.627] [vde] [info] [BtrieveSpaceDriver::Open] Vector file: /data/player_roles/vectors.space
[2026-02-21 19:43:26.628] [vde] [info] [BtrieveSpaceDriver::Open] Space does not exist, creating new one
[2026-02-21 19:43:26.631] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] Loading ID mappings from /data/player_roles/storage_id_mappings.zst
[2026-02-21 19:43:26.631] [vde] [info] [BtrieveSpaceDriver::LoadIdMappings] No mappings file found (this is normal for newly created storage)
[2026-02-21 19:43:26.631] [vde] [info] [BtrieveSpaceDriver::Open] Storage driver opened successfully
[2026-02-21 19:43:26.631] [vde] [info] [VDECollection::Init] Storage driver opened successfully
[2026-02-21 19:43:26.631] [vde] [info] [VDECollection::Init] Initialization completed successfully
[2026-02-21 19:43:26.631] [vde] [info] [VDECollection::Init] Save Metadata right after creation.
[2026-02-21 19:43:26.632] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:26.632] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:26.632] [vde] [info] [VDECollection::Init] Save Metadata completed.
[2026-02-21 19:43:26.632] [vde] [info] Collection 'player_roles' created successfully
[2026-02-21 19:43:26.641] [vde] [info] [VDECollection::BatchUpsert] Starting batch upsert for 574 vectors
[2026-02-21 19:43:26.642] [vde] [info] [VDECollection::BatchUpsert] Calling index_driver_->BatchAdd for 574 vectors
[2026-02-21 19:43:26.642] [vde] [info] [FaissDriver::BatchAdd] Batch adding 574 vectors to FAISS index
[2026-02-21 19:43:26.653] [vde] [info] [FaissDriver::BatchAdd] Successfully added 574 vectors to FAISS index
[2026-02-21 19:43:26.653] [vde] [info] [VDECollection::BatchUpsert] BatchAdd to index completed successfully
[2026-02-21 19:43:26.653] [vde] [info] [VDECollection::BatchUpsert] Calling storage_driver_->BatchPutVectors for 574 vectors
[2026-02-21 19:43:26.670] [vde] [info] [VDECollection::BatchUpsert] BatchPutVectors completed successfully
[2026-02-21 19:43:26.705] [vde] [info] [VDECollection::BatchUpsert] Batch upsert completed successfully for 574 vectors
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveSnapshot] Saving snapshot for collection 'player_roles'
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveSnapshot] Snapshot files will be saved to:
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveSnapshot]   - metadata: /data/player_roles/metadata.json
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveSnapshot]   - id_mappings: /data/player_roles/id_mappings.zst
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveSnapshot]   - index_snapshot: /data/player_roles/index.snapshot
[2026-02-21 19:43:26.707] [vde] [info] [VDECollection::SaveMetadata] Saving metadata for collection 'player_roles' to: /data/player_roles/metadata.json
[2026-02-21 19:43:26.708] [vde] [info] [VDECollection::SaveMetadata] Metadata saved to /data/player_roles/metadata.json (storage_type=StorageType::BTRIEVE_SPACE, index_driver_type=IndexDriverType::FAISS)
[2026-02-21 19:43:26.708] [vde] [info] [CompressString] String size: 22768 bytes
[2026-02-21 19:43:26.708] [vde] [info] [CompressString] Compression Level: 3, Compressed Size: 1337 bytes
[2026-02-21 19:43:26.709] [vde] [info] [VDECollection::SaveSnapshot] ID mappings saved to /data/player_roles/id_mappings.zst (574 mappings)
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] index_ address: 140733999146784
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Serializing FAISS index to: /data/player_roles/index.snapshot
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Index stats: ntotal=574, id_map_size=574, deleted_ids=0
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Index info: is_trained=true, own_fields=true, metric_type=0
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] HNSW params: efConstruction=200, efSearch=50, max_level=2
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] HNSW stats: levels.size()=574, cum_nneighbor_per_level.size()=9
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Storage index: ntotal=574, is_trained=true, d=7
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Directory already exists: /data/player_roles
[2026-02-21 19:43:26.709] [vde] [info] [FaissDriver::Serialize] Calling faiss::write_index...
[2026-02-21 19:43:26.710] [vde] [info] [FaissDriver::Serialize] FAISS index written successfully (full index with storage)
[2026-02-21 19:43:26.710] [vde] [info] [FaissDriver::Serialize] Index file size: 0.09 MB (skip_storage=false)
[2026-02-21 19:43:26.710] [vde] [info] [FaissDriver::Serialize] Metadata written successfully to /data/player_roles/index.snapshot.meta
[2026-02-21 19:43:26.710] [vde] [info] [FaissDriver::Serialize] Serialization completed successfully
[2026-02-21 19:43:26.710] [vde] [info] [VDECollection::SaveSnapshot] Index snapshot saved to /data/player_roles/index.snapshot
[2026-02-21 19:43:26.710] [vde] [info] [VDECollection::SaveSnapshot] Snapshot saved successfully for collection 'player_roles'
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] === FIRST SEARCH - HNSW Parameters ===
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] Index ntotal: 574
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] Storage ntotal: 574
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] Query top_k: 15
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] efSearch: 50 (configured: 50)
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] efConstruction: 200
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] max_level: 2
[2026-02-21 19:43:26.715] [vde] [info] [FaissDriver::Search] levels.size(): 574
[2026-02-21 19:43:26.715] [vde] [info] [FaissDr